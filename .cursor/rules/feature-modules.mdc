---
description: develop feature module
globs: 
alwaysApply: false
---
# æ ¡å›­AIæ™ºèƒ½åŠ©æ‰‹ - åŠŸèƒ½æ¨¡å—è§„èŒƒ

## æ¨¡å—æ€»è§ˆ

å››å¤§æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼š
1. **AIå¯¹è¯åŠ©æ‰‹æ¨¡å—** ğŸ¤– - æ™ºèƒ½å¯¹è¯äº¤äº’
2. **è¯¾ç¨‹ç®¡ç†æ¨¡å—** ğŸ“š - è¯¾ç¨‹ä¿¡æ¯ç®¡ç†
3. **å­¦ä¹ è®¡åˆ’æ¨¡å—** ğŸ“ - ä¸ªæ€§åŒ–å­¦ä¹ è§„åˆ’
4. **æ ¡å›­ä¿¡æ¯æŸ¥è¯¢æ¨¡å—** ğŸ« - æ ¡å›­æœåŠ¡ä¿¡æ¯

## AIå¯¹è¯åŠ©æ‰‹æ¨¡å—

### åŠŸèƒ½è®¾è®¡
- è‡ªç„¶è¯­è¨€ç†è§£å’Œå›ç­”
- å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ä¿æŒ
- å­¦æœ¯é—®é¢˜æ™ºèƒ½è§£ç­”
- èŠå¤©å†å²è®°å½•ç®¡ç†

### æ¥å£å®šä¹‰
```java
public interface ChatContract {
    interface View extends BaseView {
        void displayMessage(Message message);
        void showTypingIndicator();
        void hideTypingIndicator();
        void scrollToBottom();
        void clearInputField();
        void showChatHistory(List<Message> messages);
    }
    
    interface Presenter extends BasePresenter<View> {
        void sendMessage(String content);
        void loadChatHistory();
        void clearChatHistory();
        void retryLastMessage();
    }
}
```

### æ•°æ®æ¨¡å‹
```java
public class Message {
    private String messageId;
    private String content;
    private MessageType type;
    private long timestamp;
    private MessageStatus status;
    
    public enum MessageType {
        USER, AI, SYSTEM
    }
    
    public enum MessageStatus {
        SENDING, SENT, FAILED
    }
}

public class ChatSession {
    private String sessionId;
    private List<Message> messages;
    private long createTime;
    private long lastUpdateTime;
}
```

### UIè®¾è®¡è§„èŒƒ
```xml
<!-- fragment_chat.xml -->
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    
    <!-- èŠå¤©è®°å½• -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_chat"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:padding="@dimen/spacing_medium" />
    
    <!-- è¾“å…¥åŒºåŸŸ -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="@dimen/spacing_medium">
        
        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/edit_message"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="@string/hint_message" />
        
        <com.google.android.material.button.MaterialButton
            android:id="@+id/btn_send"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/send" />
    </LinearLayout>
    
</LinearLayout>
```

## è¯¾ç¨‹ç®¡ç†æ¨¡å—

### åŠŸèƒ½è®¾è®¡
- è¯¾ç¨‹ä¿¡æ¯å½•å…¥å’Œç¼–è¾‘
- è¯¾ç¨‹è¡¨å¯è§†åŒ–å±•ç¤º
- ä½œä¸šå’Œè€ƒè¯•æé†’
- æˆç»©è®°å½•å’Œç»Ÿè®¡

### æ¥å£å®šä¹‰
```java
public interface CourseContract {
    interface View extends BaseView {
        void showCourseList(List<Course> courses);
        void showCourseDetail(Course course);
        void showScheduleView(List<Course> courses);
        void showGradeStatistics(GradeStatistics stats);
        void navigateToAddCourse();
        void showDeleteConfirmation(Course course);
    }
    
    interface Presenter extends BasePresenter<View> {
        void loadCourses();
        void addCourse(Course course);
        void updateCourse(Course course);
        void deleteCourse(String courseId);
        void loadSchedule();
        void calculateGradeStatistics();
    }
}
```

### æ•°æ®æ¨¡å‹
```java
public class Course {
    private String courseId;
    private String courseName;
    private String courseCode;
    private String instructor;
    private int credits;
    private String classroom;
    private String semester;
    private List<CourseTime> times;
    private List<Grade> grades;
}

public class CourseTime {
    private DayOfWeek dayOfWeek;
    private int startTime;      // 24å°æ—¶æ ¼å¼ï¼Œå¦‚800è¡¨ç¤º8:00
    private int endTime;
    private int weekStart;      // å¼€å§‹å‘¨æ¬¡
    private int weekEnd;        // ç»“æŸå‘¨æ¬¡
}

public class Grade {
    private String gradeId;
    private String courseId;
    private String assignmentName;
    private double score;
    private double totalScore;
    private GradeType type;
    private long recordTime;
    
    public enum GradeType {
        HOMEWORK, QUIZ, MIDTERM, FINAL, PROJECT
    }
}
```

### è¯¾ç¨‹è¡¨å¸ƒå±€
```xml
<!-- fragment_course_schedule.xml -->
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    
    <!-- å­¦æœŸé€‰æ‹©å™¨ -->
    <Spinner
        android:id="@+id/spinner_semester"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="@dimen/spacing_medium" />
    
    <!-- è¯¾ç¨‹è¡¨æ ¼ -->
    <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        
        <TableLayout
            android:id="@+id/table_schedule"
            android:layout_width="wrap_content"
            android:layout_height="match_parent">
            <!-- åŠ¨æ€ç”Ÿæˆè¯¾ç¨‹è¡¨æ ¼ -->
        </TableLayout>
        
    </HorizontalScrollView>
    
</LinearLayout>
```

## å­¦ä¹ è®¡åˆ’æ¨¡å—

### åŠŸèƒ½è®¾è®¡
- ä¸ªæ€§åŒ–å­¦ä¹ è®¡åˆ’åˆ¶å®š
- å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œå¯è§†åŒ–
- ç›®æ ‡è®¾å®šå’Œè¾¾æˆç›‘æ§
- å­¦ä¹ æ•ˆç‡åˆ†æå’Œå»ºè®®

### æ¥å£å®šä¹‰
```java
public interface StudyPlanContract {
    interface View extends BaseView {
        void showPlanList(List<StudyPlan> plans);
        void showPlanDetail(StudyPlan plan);
        void showProgressChart(ProgressData data);
        void showGoalStatistics(GoalStatistics stats);
        void showTaskReminder(Task task);
        void showEfficiencyReport(EfficiencyReport report);
    }
    
    interface Presenter extends BasePresenter<View> {
        void loadStudyPlans();
        void createPlan(StudyPlan plan);
        void updatePlan(StudyPlan plan);
        void deletePlan(String planId);
        void completeTask(String taskId);
        void generateProgressReport();
    }
}
```

### æ•°æ®æ¨¡å‹
```java
public class StudyPlan {
    private String planId;
    private String title;
    private String description;
    private PlanType type;
    private Date startDate;
    private Date endDate;
    private List<Goal> goals;
    private List<Task> tasks;
    private PlanStatus status;
    
    public enum PlanType {
        DAILY, WEEKLY, MONTHLY, EXAM_PREP, PROJECT
    }
    
    public enum PlanStatus {
        ACTIVE, COMPLETED, PAUSED, CANCELLED
    }
}

public class Task {
    private String taskId;
    private String planId;
    private String title;
    private String description;
    private TaskPriority priority;
    private int estimatedHours;
    private Date dueDate;
    private TaskStatus status;
    private Date completedTime;
    
    public enum TaskPriority {
        LOW, MEDIUM, HIGH, URGENT
    }
    
    public enum TaskStatus {
        TODO, IN_PROGRESS, COMPLETED, CANCELLED
    }
}
```

### è®¡åˆ’æ¦‚è§ˆç•Œé¢
```xml
<!-- fragment_study_plan.xml -->
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="@dimen/spacing_medium">
        
        <!-- è¿›åº¦æ¦‚è§ˆå¡ç‰‡ -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="@dimen/spacing_medium">
            
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="@dimen/card_padding">
                
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/progress_overview"
                    android:textAppearance="?attr/textAppearanceHeadline6" />
                
                <!-- è¿›åº¦æ¡å’Œç»Ÿè®¡ä¿¡æ¯ -->
                <ProgressBar
                    android:id="@+id/progress_overall"
                    style="?android:attr/progressBarStyleHorizontal"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="@dimen/spacing_small" />
                
            </LinearLayout>
            
        </com.google.android.material.card.MaterialCardView>
        
        <!-- ä»»åŠ¡åˆ—è¡¨ -->
        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recycler_tasks"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
        
    </LinearLayout>
    
</ScrollView>
```

## æ ¡å›­ä¿¡æ¯æŸ¥è¯¢æ¨¡å—

### åŠŸèƒ½è®¾è®¡
- æ ¡å›­æœåŠ¡ä¿¡æ¯æ•´åˆ
- å¿«é€Ÿæœç´¢å’Œç­›é€‰
- å¸¸ç”¨ä¿¡æ¯æ”¶è—
- ä¿¡æ¯åˆ†ç±»ç®¡ç†

### æ¥å£å®šä¹‰
```java
public interface CampusInfoContract {
    interface View extends BaseView {
        void showInfoCategories(List<InfoCategory> categories);
        void showInfoList(List<CampusInfo> infoList);
        void showInfoDetail(CampusInfo info);
        void showSearchResults(List<CampusInfo> results);
        void showFavoritesList(List<CampusInfo> favorites);
    }
    
    interface Presenter extends BasePresenter<View> {
        void loadInfoCategories();
        void loadInfoByCategory(String categoryId);
        void searchInfo(String keyword);
        void addToFavorites(String infoId);
        void removeFromFavorites(String infoId);
        void loadFavorites();
    }
}
```

### æ•°æ®æ¨¡å‹
```java
public class CampusInfo {
    private String infoId;
    private String title;
    private String content;
    private String categoryId;
    private InfoType type;
    private String imageUrl;
    private String contactInfo;
    private String location;
    private boolean isFavorite;
    private long updateTime;
    
    public enum InfoType {
        SERVICE, FACILITY, ACTIVITY, NOTICE, DINING, LIBRARY
    }
}

public class InfoCategory {
    private String categoryId;
    private String categoryName;
    private String iconResource;
    private String description;
    private int infoCount;
}
```

### ä¿¡æ¯æŸ¥è¯¢ç•Œé¢
```xml
<!-- fragment_campus_info.xml -->
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    
    <!-- æœç´¢æ  -->
    <com.google.android.material.textfield.TextInputLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="@dimen/spacing_medium"
        style="@style/Widget.Material3.TextInputLayout.OutlinedBox">
        
        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/edit_search"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/hint_search_campus"
            android:inputType="text" />
            
    </com.google.android.material.textfield.TextInputLayout>
    
    <!-- åˆ†ç±»ç½‘æ ¼ -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_categories"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="@dimen/spacing_medium" />
    
    <!-- ä¿¡æ¯åˆ—è¡¨ -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_info_list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
    
</LinearLayout>
```

## æ¨¡å—é—´ååŒè®¾è®¡

### æ•°æ®å…±äº«æœºåˆ¶
- AIåŠ©æ‰‹å¯æŸ¥è¯¢è¯¾ç¨‹å’Œè®¡åˆ’ä¿¡æ¯
- è¯¾ç¨‹ç®¡ç†æ”¯æŒè‡ªåŠ¨ç”Ÿæˆå­¦ä¹ è®¡åˆ’
- æ ¡å›­ä¿¡æ¯å¯å…³è”åˆ°å­¦ä¹ å’Œç”Ÿæ´»åœºæ™¯

### ç»Ÿä¸€æ•°æ®æ¥å£
```java
public interface DataRepository {
    // è¯¾ç¨‹æ•°æ®
    List<Course> getAllCourses();
    Course getCourseById(String courseId);
    
    // è®¡åˆ’æ•°æ®
    List<StudyPlan> getAllPlans();
    StudyPlan getPlanById(String planId);
    
    // æ ¡å›­ä¿¡æ¯
    List<CampusInfo> getInfoByCategory(String categoryId);
    List<CampusInfo> searchInfo(String keyword);
    
    // èŠå¤©è®°å½•
    List<Message> getChatHistory();
    void saveMessage(Message message);
}
```

å‚è€ƒç›¸å…³è§„åˆ™æ–‡ä»¶ï¼š
- [coding-standards.mdc](mdc:coding-standards.mdc) - ä»£ç å¼€å‘è§„èŒƒ
- [data-storage-rules.mdc](mdc:data-storage-rules.mdc) - æ•°æ®å­˜å‚¨è§„èŒƒ
- [ui-design-rules.mdc](mdc:ui-design-rules.mdc) - UIè®¾è®¡è§„èŒƒ
